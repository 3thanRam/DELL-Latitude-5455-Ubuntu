dts-v1/;

/* Core Snapdragon X and Dell base definitions */
#include "hamoa.dtsi"
#include "x1-dell-thena.dtsi"

/ {
    model = "Dell Latitude 5455";
    compatible = "dell,latitude-5455", "qcom,x1p64100", "qcom,x1e80100";
};

/* --- Disable All Sound Components --- */

/* --- Disable All Sound Components to stop boot hangs and errors --- */

&sound {
    status = "disabled";
};

/* Disable SoundWire Masters 1, 2, and 3 */
&swr1 { status = "disabled"; };
&swr2 { status = "disabled"; };
&swr3 { status = "disabled"; };

/* Disable SoundWire Master 4 (Right Speaker bus) using the full path */
&{/soc@0/soundwire@6d30000} {
    status = "disabled";
};

/* --- Display & GPU Acceleration --- */
&mdss {
    status = "okay";
};

&mdss_dp0 {
    status = "okay";
};

&gpu {
    status = "okay";
    vdd-supply = <&vreg_s5j_1p2>;   /* This replaces the missing vreg_s1e */
        vddcx-supply = <&vreg_s1f_0p7>; /* This matches your grep */

        zap-shader {
                firmware-name = "qcom/x1e80100/gen70500_zap.mbn";
        };

};

/* --- Specific GPU Firmware Fix --- */
&gpu_zap_shader {
    firmware-name = "qcom/x1e80100/dell/latitude-7455/qcdxkmsuc8380.mbn";
};

&iris {
    firmware-name = "qcom/x1e80100/dell/latitude-7455/qcvss8380.mbn";
    status = "okay";
};

/* --- DSP Firmware Overrides --- */
&remoteproc_adsp {
    firmware-name = "qcom/x1e80100/dell/latitude-7455/qcadsp8380.mbn",
                    "qcom/x1e80100/dell/latitude-7455/adsp_dtbs.elf";
    status = "okay";
};

&remoteproc_cdsp {
    firmware-name = "qcom/x1e80100/dell/latitude-7455/qccdsp8380.mbn",
                    "qcom/x1e80100/dell/latitude-7455/cdsp_dtbs.elf";
    status = "okay";
};

&cpu7 { status = "disabled"; };
&cpu11 { status = "disabled"; };

